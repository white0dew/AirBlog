---
title: ã€Œé¡¹ç›®ã€å¼€å‘ä¸€ä¸ªå¯¼èˆªç½‘ç«™
urlname: negzqyxtxszvawof
date: '2024-09-30 22:40:04'
updated: '2024-10-08 08:52:01'
cover: 'https://cdn.nlark.com/yuque/0/2024/png/22382235/1727781047419-0223592a-fe80-4c9b-b389-4e833643c4f9.png'
description: 'èƒŒæ™¯åœ¨å·¥ä½œå­¦ä¹ ä¸­ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æœ‰ä¸€ä¸ªå¯¼èˆªç½‘ç«™éå¸¸é‡è¦ï¼æ— æ„ä¹‹ä¸­ï¼Œçœ‹åˆ°ä¸€ä¸ªå¾ˆæ£’çš„å¯¼èˆªç½‘ç«™ï¼Œæ‰“ç®—åŸºäºæ­¤å¼€å‘ä¸€ä¸ªï¼Œè®°å½•ä¸€ä¸‹å¼€å‘çš„è¿‡ç¨‹ã€‚Demoä»“åº“ï¼šhttps://github.com/wangfengyuan/frontend-navè®°å½•tailwindcssçš„scrollbarhttps...'
---
# èƒŒæ™¯
åœ¨å·¥ä½œå­¦ä¹ ä¸­ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯æœ‰ä¸€ä¸ªå¯¼èˆªç½‘ç«™éå¸¸é‡è¦ï¼



æ— æ„ä¹‹ä¸­ï¼Œçœ‹åˆ°ä¸€ä¸ªå¾ˆæ£’çš„å¯¼èˆªç½‘ç«™ï¼Œæ‰“ç®—åŸºäºæ­¤å¼€å‘ä¸€ä¸ªï¼Œè®°å½•ä¸€ä¸‹å¼€å‘çš„è¿‡ç¨‹ã€‚



Demoä»“åº“ï¼š[https://github.com/wangfengyuan/frontend-nav](https://github.com/wangfengyuan/frontend-nav)



# è®°å½•
## tailwindcssçš„scrollbar
[https://adoxography.github.io/tailwind-scrollbar/examples](https://adoxography.github.io/tailwind-scrollbar/examples)



## prismaçš„envæ²¡æœ‰è¯»å–åˆ°dababase_url
å‚è€ƒè¿™ä¸ªå¸–å­ï¼š

[https://stackoverflow.com/questions/67796217/prisma-getting-environment-variable-not-found-error-message-when-running-graph](https://stackoverflow.com/questions/67796217/prisma-getting-environment-variable-not-found-error-message-when-running-graph)

[https://www.prisma.io/docs/orm/more/development-environment/environment-variables/managing-env-files-and-setting-variables#manage-env-files-manually](https://www.prisma.io/docs/orm/more/development-environment/environment-variables/managing-env-files-and-setting-variables#manage-env-files-manually)

ä¸¤ç§è§£æ³•ï¼š

1ã€å®‰è£…dotenv

2ã€ç›´æ¥env.localæ”¹åä¸ºenv



## ç™»é™†æ€ä¹ˆåšï¼Ÿ
### æµ‹è¯•è´¦å·
```typescript
test1997321@qq.com
  test1997322@qq.com
    test1997323@qq.com
    test1997324@qq.com
      test1997325@qq.com
      test1997326@qq.com ** admin
123456789	

email: '1373685219@qq.com',
  password: 'leilei1997321me',
```



### <font style="color:rgb(17, 17, 17);">bcrypt-tsåˆ°åº•æ€ä¹ˆç”¨?</font>
ï¼ï¼ï¼æ³¨æ„ï¼ä¸èƒ½å¤ŸæŠŠåŠ ç›çš„å‡½æ•°ç›´æ¥å»æ¯”è¾ƒï¼Œå› ä¸ºæ¯æ¬¡ç”Ÿäº§çš„éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼

![](https://oss1.aistar.cool/elog-offer-now/5b3f4eb25fd2485c267fac74c6ab1b25.png)







+ å¦‚æœæ˜¯Githubæ¨¡å¼

0ã€å‚è€ƒ[https://authjs.dev/getting-started/authentication/oauth](https://authjs.dev/getting-started/authentication/oauth)

1ã€å…ˆåœ¨githubç”³è¯·appidå’Œsecretï¼Œå¡«å†™urlé“¾æ¥

2ã€è€Œååœ¨nextjsçš„envä¸­å†™ä¸Š

![](https://oss1.aistar.cool/elog-offer-now/dafedf58f2ded0e54eaa829f0e455ba8.png)





+ å¦‚æœæ˜¯è´¦å·å¯†ç æ¨¡å¼

[https://authjs.dev/getting-started/authentication/credentials](https://authjs.dev/getting-started/authentication/credentials)

![](https://oss1.aistar.cool/elog-offer-now/8bf25afc09f6f8a26eddac0ae674ff08.png)



å¿…é¡»è¿™æ ·ï¼ï¼ï¼å®˜æ–¹æ–‡æ¡£æ˜¯é”™çš„ï¼ï¼

![](https://oss1.aistar.cool/elog-offer-now/225bfa5746d131c00f74d01b18afb545.png)



### fromçš„actionç±»å‹é”™è¯¯?
ä¸ç”¨ç®¡Â·Â·Â·



[https://www.reddit.com/r/nextjs/comments/1616bh9/form_action_not_working/](https://www.reddit.com/r/nextjs/comments/1616bh9/form_action_not_working/)

[https://github.com/vercel/next.js/discussions/56581](https://github.com/vercel/next.js/discussions/56581)



### clientå’Œserverçš„è°ƒç”¨æ–¹å¼ä¸ä¸€æ ·Â·Â·
![](https://oss1.aistar.cool/elog-offer-now/b2ccc78c2593e903422fa45202e206f7.png)



![](https://oss1.aistar.cool/elog-offer-now/014c40e2908cf8a21fd4b2d44a3ab495.png)



### å®¢æˆ·ç«¯çš„ç»„ä»¶åˆæŠ¥é”™äº†CSRFÂ·Â·Â·
![](https://oss1.aistar.cool/elog-offer-now/eacc76c02bab8c968a0d4a5c744a1d9a.png)



å‘ç°æ˜¯ç¯å¢ƒå˜é‡é”™äº†ï¼Œç›´æ¥æ³¨é‡Šæ‰å°±è¡Œï¼š

![](https://oss1.aistar.cool/elog-offer-now/fea872cb19874f9f49372edc3a78501c.png)

## shadcn/uiçš„Buttonæ²¡æœ‰loadingï¼Œæ€ä¹ˆåŠï¼Ÿ
ç›´æ¥å‚è€ƒè¿™ä¸ªæ–‡ç« ï¼š[https://blog.typeart.cc/add-loading-spinner-in-shadcn-ui-button/](https://blog.typeart.cc/add-loading-spinner-in-shadcn-ui-button/)



```typescript
+ import { Loader2 } from 'lucide-react';


// ... ç•¥éå‰é¢ cva éƒ¨ä»½

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
+  loading?: boolean;
}

// å°‡ loading èˆ‡ children å¾ props å–å‡ºä¾†
const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
+  ({ className, variant, size, asChild = false, loading, children, ...props }, ref) => {
    const Comp = asChild ? Slot : 'button';
    return (
      <Comp
        className={cn(buttonVariants({ variant, size, className }))}
+        disabled={loading}
        ref={ref}
        {...props}
      >
+        {loading ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : children}
      </Comp>
    );
  },
);
Button.displayName = 'Button';
```

## æ€ä¹ˆä½¿ç”¨safe-server-actionï¼Ÿ
å®˜æ–¹æ–‡æ¡£ï¼š[https://next-safe-action.dev/](https://next-safe-action.dev/)



## Zodåº”è¯¥æ€ä¹ˆä½¿ç”¨ï¼Ÿæ¯”å¦‚å£°æ˜äº†ä¸€ä¸ªç»“æ„ä½“ï¼Œåº”è¯¥æ€ä¹ˆèµ‹å€¼å‘¢ï¼Ÿ
å®˜æ–¹æ–‡æ¡£ï¼š[https://zod.dev/?id=basic-usage](https://zod.dev/?id=basic-usage)



è¿™æ ·:

```typescript
import { z } from "zod";

const User = z.object({
  username: z.string(),
});

User.parse({ username: "Ludwig" });

// extract the inferred type
type User = z.infer<typeof User>;
// { username: string }
```

## æ€ä¹ˆå®ç°é€‰æ‹©Emojiï¼Ÿ
![](https://oss1.aistar.cool/elog-offer-now/aa0b3d1e7f8789bfd4e1e11e5b236816.png)



å¦‚ä¸Šå›¾ï¼Œæˆ‘éœ€è¦åœ¨è¿™ä¸ªè¾“å…¥æ¡†ï¼Œå¯ä»¥é€‰æ‹©è¡¨æƒ…æˆ–è€…åˆ†ç»„åœ°å€ã€‚



æ‰¾åˆ°ä¸€ä¸ªåº“ï¼Œåœ¨è¿™é‡Œï¼š[https://ealush.com/emoji-picker-react/](https://ealush.com/emoji-picker-react/)

å¾ˆå¥½ç”¨ï¼Œå¯ä»¥é€‰æ‹©å±è”½æŸäº›ä¸éœ€è¦çš„Emojiï¼Œæ¯”å¦‚FlagÂ·Â·Â·Â·



å½“é€‰æ‹©è¡¨æƒ…ä¹‹åï¼Œä¼šæœ‰ä¸€ä¸ªcallBackï¼Œè¾“å‡ºçš„å†…å®¹æ˜¯å½“å‰çš„è¡¨æƒ…ä¿¡æ¯ï¼š

```typescript
{
    "activeSkinTone": "neutral",
    "emoji": "ğŸ˜†",
    "imageUrl": "https://cdn.jsdelivr.net/npm/emoji-datasource-apple/img/apple/64/1f606.png",
    "isCustom": false,
    "names": [
        "laughing",
        "satisfied",
        "smiling face with open mouth and tightly-closed eyes"
    ],
    "unified": "1f606",
    "unifiedWithoutSkinTone": "1f606"
}
```

## å‘ç°ä¸€ä¸ªé—®é¢˜useActionçš„æ“ä½œæ˜¯å¼‚æ­¥çš„ï¼
```typescript
// è°ƒç”¨Actionè¿›è¡Œæ›´æ–°
  const AddCategoryAction = useAction(AddCategory)

<Button
            type="submit"
            variant="default"
            loading={AddCategoryAction.isPending}
            onClick={async () => {
              await AddCategoryAction.execute(newCategory)
              mylog("AddCategoryAction res", AddCategoryAction.result)

              if (AddCategoryAction.hasErrored) {
                mylog(
                  "AddCategory Err",
                  AddCategoryAction.result.validationErrors
                )
                toast(
                  JSON.stringify(AddCategoryAction.result.validationErrors) ??
                    "åˆ†ç±»æ·»åŠ å¤±è´¥ï¼Œè¯·é‡è¯•"
                )
              } else {
                toast("åˆ†ç±»æ·»åŠ æˆåŠŸ")
                // window.location.reload()
              }
            }}
          >
            ä¿å­˜
          </Button>
```

ç”±äºæ˜¯hookæ¥çš„ï¼Œåœ¨onclickå‡½æ•°é‡Œæ˜¯å¼‚æ­¥çš„ï¼Œé€ æˆæ•°æ®ä¸ä¸€è‡´ï¼Œæ€ä¹ˆåŠå•Šï¼



ä¸¤ç§æ–¹æ³•ï¼š

1ã€æ¢æˆä½¿ç”¨const res = await AddCategoryAction.**executeAsync**(newCategory)



2ã€ä½¿ç”¨useEffectæ¥ç›‘å¬



```typescript
useEffect(() => {
    if (!AddCategoryAction.isPending) {
      if (AddCategoryAction.hasErrored) {
        toast(
          JSON.stringify(AddCategoryAction.result.validationErrors) ??
            "åˆ†ç±»æ·»åŠ å¤±è´¥ï¼Œè¯·é‡è¯•"
        )
      } else {
        toast("åˆ†ç±»æ·»åŠ æˆåŠŸ")
        // ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œå…¶ä»–æ“ä½œï¼Œæ¯”å¦‚å…³é—­å¯¹è¯æ¡†æˆ–é‡ç½®è¡¨å•
      }
    }
  }, [
    AddCategoryAction.isPending,
    AddCategoryAction.hasErrored,
    AddCategoryAction.result,
  ])
```

## Iconå¯ä»¥é€‰æ‹©çš„ç½‘ç«™~


[https://lucide.dev/guide/packages/lucide-react](https://lucide.dev/guide/packages/lucide-react)



## å¦‚ä½•ä»ç»“æ„ä½“ä¸­å»é™¤æŸä¸ªå­—æ®µï¼Ÿ-Omit
åœ¨ TypeScript ä¸­æ²¡æœ‰ä¸¥æ ¼æ„ä¹‰ä¸Šçš„â€œç»“æ„ä½“â€æ¦‚å¿µï¼Œä½†å¯ä»¥é€šè¿‡å¯¹è±¡ç±»å‹æˆ–æ¥å£æ¥æ¨¡æ‹Ÿã€‚è¦ä»ä¸€ä¸ªå¯¹è±¡ä¸­å»é™¤æŸä¸ªå­—æ®µï¼Œå¯ä»¥é€šè¿‡ç±»å‹æ–­è¨€å’Œå¯¹è±¡è§£æ„çš„æ–¹å¼æ¥å®ç°ã€‚

å‡è®¾ä½ æœ‰ä¸€ä¸ªç±»å‹å¦‚ä¸‹ï¼š

```typescript
interface MyType {
  field1: string;
  field2: number;
  field3: boolean;
}
```

ç°åœ¨è¦å»é™¤ `field2` å­—æ®µï¼Œå¯ä»¥è¿™æ ·åšï¼š

```typescript
const obj: MyType = { field1: 'some string', field2: 123, field3: true };

const { field2,...rest } = obj;

const newObj = rest as Omit<MyType, 'field2'>;
console.log(newObj);
```

è¿™é‡Œä½¿ç”¨äº†å¯¹è±¡è§£æ„å’Œç±»å‹æ–­è¨€æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¸åŒ…å«æŒ‡å®šçš„å­—æ®µã€‚

æˆ–è€…å¯ä»¥ä½¿ç”¨ `Omit` ç±»å‹å·¥å…·æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œç„¶åå°†åŸå¯¹è±¡è½¬æ¢ä¸ºæ–°ç±»å‹ï¼š

```typescript
type NewType = Omit<MyType, 'field2'>;

const newObj2: NewType = obj as NewType;
console.log(newObj2);
```

## é‡åˆ°ä¸€ä¸ªé—®é¢˜formçš„å€¼æ²¡æœ‰æ›´æ–°å•Šï¼SetValue
æœ‰ä¸€ä¸ªissueå·²ç»æåˆ°äº†ï¼š[https://github.com/react-hook-form/react-hook-form/issues/456](https://github.com/react-hook-form/react-hook-form/issues/456)



å…¶å®å…³é”®åœ¨äºSetValueä¸ä¼šå¯¼è‡´formçš„ç»„ä»¶é‡æ–°æ›´æ–°ã€‚



å¦‚æœæƒ³å®ç°setValueä¹‹åï¼Œç»„ä»¶å†…å®¹æ›´æ–°ï¼Œéœ€è¦useEffectè¿›è¡Œç»„ä»¶re-renderã€‚



## diaglogé‡Œçš„formæ•°æ®æ²¡æœ‰è¢«æ¸…ç©ºã€‚
å‘ç°æ–°å»ºä¸€ä¸ªåˆ†ç±»ä¹‹åï¼Œå†æ¬¡ç‚¹å¼€æ–°å»ºï¼Œé‡Œé¢çš„å†…å®¹è¿˜æ˜¯ä¸Šä¸€æ¬¡ä¿å­˜çš„æ•°æ®ï¼Œå› æ­¤éœ€è¦åšä¸€æ¬¡æ¸…ç©ºã€‚

![](https://oss1.aistar.cool/elog-offer-now/7e7a3ca698b98f5fe7d2e4c995ebee43.png)

## TODO å›¾ç‰‡å°ºå¯¸ä¸å¯¹Â·Â·Â·
![](https://oss1.aistar.cool/elog-offer-now/f4de64e9a4eb419ac16e4bf5cacdc5ee.png)

æºä»£ç å¦‚ä¸‹ï¼š

![](https://oss1.aistar.cool/elog-offer-now/a5313ba3b7c3cea1da0354b7dc945abc.png)



åˆ°åº•ä»€ä¹ˆåŸå› å‘¢ï¼Ÿ



## éƒ¨ç½²åœ¨vercelä¹‹åï¼Œä¸€ç›´æŠ¥é”™Prisma is not defined
è°·æ­Œäº†åŠå¤©ï¼Œä¸€ç›´æ²¡æ‰¾åˆ°é—®é¢˜å‡ºåœ¨å“ªÂ·Â·



å‘ç°æ˜¯æ²¡æœ‰importÂ·Â·Â·Â·ä¸ºä»€ä¹ˆç¼–è¾‘å™¨æ²¡æœ‰æç¤ºå•Šï¼Ÿ

![](https://oss1.aistar.cool/elog-offer-now/a08087d143007e00c946bee258021f86.png)



## TODO æ€ä¹ˆå®ç°ç‚¹å‡»urlè·³è½¬å¯¹åº”çš„é¡µé¢ï¼Œä½†æ˜¯urlä¸å˜ï¼Ÿ


